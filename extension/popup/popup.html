<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gist List</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="feedback-styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Gister</h1>
            <p class="tagline">AI-Powered Reseller Assistant</p>
            <div class="auth-status" id="authStatus"></div>
        </div>

        <!-- Data Sync Section -->
        <div class="sync-section">
            <div class="sync-controls">
                <button id="syncFromApp" class="btn btn-primary">Sync from Gister App</button>
                <button id="refreshData" class="btn btn-secondary">Refresh</button>
            </div>
            <div class="sync-status" id="syncStatus">
                <span class="status-text">Ready to sync</span>
            </div>
        </div>

        <!-- Listings Section -->
        <div class="listings-section">
            <h3>Available Listings <span id="listingCount" class="count">0</span></h3>
            <div id="listingsContainer" class="listings-container">
                <div class="empty-state" id="emptyState">
                    <p>No listings found. Sync your listings from the Gister app to get started.</p>
                    <button class="btn btn-primary" onclick="document.getElementById('syncFromApp').click()">Sync Listings</button>
                </div>
            </div>
        </div>

        <!-- Platform Selection -->
        <div class="platform-section" id="platformSection" style="display: none;">
            <h3>Select Platforms</h3>
            <div class="platforms-grid">
                <label class="platform-item">
                    <input type="checkbox" name="platform" value="craigslist" id="craigslist">
                    <span class="platform-name">Craigslist</span>
                    <span class="platform-status" id="craigslist-status"></span>
                </label>
                
                <label class="platform-item">
                    <input type="checkbox" name="platform" value="reverb" id="reverb">
                    <span class="platform-name">Reverb</span>
                    <span class="platform-status" id="reverb-status"></span>
                </label>
                
                <label class="platform-item">
                    <input type="checkbox" name="platform" value="poshmark" id="poshmark">
                    <span class="platform-name">Poshmark</span>
                    <span class="platform-status" id="poshmark-status"></span>
                </label>
                
                <label class="platform-item">
                    <input type="checkbox" name="platform" value="ebay" id="ebay">
                    <span class="platform-name">eBay</span>
                    <span class="platform-status" id="ebay-status"></span>
                </label>
                
                <label class="platform-item">
                    <input type="checkbox" name="platform" value="nextdoor" id="nextdoor">
                    <span class="platform-name">Nextdoor</span>
                    <span class="platform-status" id="nextdoor-status"></span>
                </label>
                
                <label class="platform-item">
                    <input type="checkbox" name="platform" value="mercari" id="mercari">
                    <span class="platform-name">Mercari</span>
                    <span class="platform-status" id="mercari-status"></span>
                </label>
                
                <label class="platform-item">
                    <input type="checkbox" name="platform" value="facebook" id="facebook">
                    <span class="platform-name">Facebook</span>
                    <span class="platform-status" id="facebook-status"></span>
                </label>
            </div>
        </div>

        <!-- Scheduling Section -->
        <div class="scheduling-section" id="schedulingSection" style="display: none;">
            <h3>‚è∞ Schedule Posting</h3>
            <div class="schedule-options">
                <label class="schedule-option">
                    <input type="radio" name="scheduleType" value="now" checked>
                    <span class="option-label">
                        <strong>Post Now</strong>
                        <small>Start posting immediately</small>
                    </span>
                </label>
                
                <label class="schedule-option">
                    <input type="radio" name="scheduleType" value="ai">
                    <span class="option-label">
                        <strong>ü§ñ AI Recommended Time</strong>
                        <small id="aiTimeRecommendation">Let AI choose optimal time</small>
                    </span>
                </label>
                
                <label class="schedule-option">
                    <input type="radio" name="scheduleType" value="custom">
                    <span class="option-label">
                        <strong>Custom Time</strong>
                        <small>Choose your own schedule</small>
                    </span>
                </label>
            </div>

            <div class="custom-time-picker" id="customTimePicker" style="display: none;">
                <input type="datetime-local" id="customTime" class="time-input">
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-section" id="actionSection" style="display: none;">
            <div class="action-buttons">
                <button id="selectAll" class="btn btn-secondary">Select All</button>
                <button id="postListings" class="btn btn-primary" disabled>Post to Selected Platforms</button>
            </div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section" id="progressSection" style="display: none;">
            <div class="progress-header">
                <h3>Posting Progress</h3>
                <button id="cancelPosting" class="btn btn-danger btn-small">Cancel</button>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text" id="progressText">Preparing to post...</div>
            <div class="progress-details" id="progressDetails"></div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="resultsSection" style="display: none;">
            <h3>Posting Results</h3>
            <div id="resultsContainer" class="results-container"></div>
            <button id="startOver" class="btn btn-primary">Post More Listings</button>
        </div>
    </div>

    <script src="../api/gister-api.js"></script>
    <script src="user-feedback.js"></script>
    <script src="popup.js"></script>
</body>
</html>